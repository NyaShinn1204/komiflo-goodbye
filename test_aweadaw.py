from PIL import Image

ops =  [{'sx': 1024, 'sy': 512, 'dx': 0, 'dy': 0}, {'sx': 256, 'sy': 128, 'dx': 128, 'dy': 0}, {'sx': 128, 'sy': 1664, 'dx': 256, 'dy': 0}, {'sx': 256, 'sy': 1664, 'dx': 384, 'dy': 0}, {'sx': 1024, 'sy': 384, 'dx': 512, 'dy': 0}, {'sx': 896, 'sy': 1024, 'dx': 640, 'dy': 0}, {'sx': 0, 'sy': 128, 'dx': 768, 'dy': 0}, {'sx': 128, 'sy': 640, 'dx': 896, 'dy': 0}, {'sx': 0, 'sy': 512, 'dx': 1024, 'dy': 0}, {'sx': 768, 'sy': 768, 'dx': 1152, 'dy': 0}, {'sx': 384, 'sy': 512, 'dx': 1231, 'dy': 0}, {'sx': 384, 'sy': 128, 'dx': 0, 'dy': 128}, {'sx': 768, 'sy': 0, 'dx': 128, 'dy': 128}, {'sx': 1152, 'sy': 1024, 'dx': 256, 'dy': 128}, {'sx': 640, 'sy': 512, 'dx': 384, 'dy': 128}, {'sx': 768, 'sy': 1280, 'dx': 512, 'dy': 128}, {'sx': 1280, 'sy': 640, 'dx': 640, 'dy': 128}, {'sx': 256, 'sy': 1792, 'dx': 768, 'dy': 128}, {'sx': 1280, 'sy': 896, 'dx': 896, 'dy': 128}, {'sx': 640, 'sy': 1280, 'dx': 1024, 'dy': 128}, {'sx': 0, 'sy': 896, 'dx': 1152, 'dy': 128}, {'sx': 128, 'sy': 1536, 'dx': 1231, 'dy': 128}, {'sx': 512, 'sy': 1536, 'dx': 0, 'dy': 256}, {'sx': 0, 'sy': 1408, 'dx': 128, 'dy': 256}, {'sx': 128, 'sy': 0, 'dx': 256, 'dy': 256}, {'sx': 1152, 'sy': 0, 'dx': 384, 'dy': 256}, {'sx': 896, 'sy': 1792, 'dx': 512, 'dy': 256}, {'sx': 768, 'sy': 896, 'dx': 640, 'dy': 256}, {'sx': 1152, 'sy': 1664, 'dx': 768, 'dy': 256}, {'sx': 640, 'sy': 640, 'dx': 896, 'dy': 256}, {'sx': 1152, 'sy': 1408, 'dx': 1024, 'dy': 256}, {'sx': 1152, 'sy': 1536, 'dx': 1152, 'dy': 256}, {'sx': 768, 'sy': 128, 'dx': 1231, 'dy': 256}, {'sx': 128, 'sy': 1792, 'dx': 0, 'dy': 384}, {'sx': 1024, 'sy': 256, 'dx': 128, 'dy': 384}, {'sx': 384, 'sy': 1280, 'dx': 256, 'dy': 384}, {'sx': 1024, 'sy': 640, 'dx': 384, 'dy': 384}, {'sx': 640, 'sy': 1536, 'dx': 512, 'dy': 384}, {'sx': 512, 'sy': 768, 'dx': 640, 'dy': 384}, {'sx': 384, 'sy': 384, 'dx': 768, 'dy': 384}, {'sx': 640, 'sy': 0, 'dx': 896, 'dy': 384}, {'sx': 896, 'sy': 384, 'dx': 1024, 'dy': 384}, {'sx': 0, 'sy': 256, 'dx': 1152, 'dy': 384}, {'sx': 640, 'sy': 1792, 'dx': 1231, 'dy': 384}, {'sx': 256, 'sy': 768, 'dx': 0, 'dy': 512}, {'sx': 1152, 'sy': 640, 'dx': 128, 'dy': 512}, {'sx': 128, 'sy': 1024, 'dx': 256, 'dy': 512}, {'sx': 512, 'sy': 1280, 'dx': 384, 'dy': 512}, {'sx': 896, 'sy': 768, 'dx': 512, 'dy': 512}, {'sx': 768, 'sy': 1024, 'dx': 640, 'dy': 512}, {'sx': 128, 'sy': 1280, 'dx': 768, 'dy': 512}, {'sx': 1152, 'sy': 256, 'dx': 896, 'dy': 512}, {'sx': 512, 'sy': 1792, 'dx': 1024, 'dy': 512}, {'sx': 384, 'sy': 1664, 'dx': 1152, 'dy': 512}, {'sx': 768, 'sy': 1152, 'dx': 1231, 'dy': 512}, {'sx': 128, 'sy': 384, 'dx': 0, 'dy': 640}, {'sx': 1024, 'sy': 0, 'dx': 128, 'dy': 640}, {'sx': 896, 'sy': 0, 'dx': 256, 'dy': 640}, {'sx': 640, 'sy': 1024, 'dx': 384, 'dy': 640}, {'sx': 1280, 'sy': 384, 'dx': 512, 'dy': 640}, {'sx': 896, 'sy': 256, 'dx': 640, 'dy': 640}, {'sx': 0, 'sy': 1152, 'dx': 768, 'dy': 640}, {'sx': 128, 'sy': 1408, 'dx': 896, 'dy': 640}, {'sx': 256, 'sy': 1408, 'dx': 1024, 'dy': 640}, {'sx': 1280, 'sy': 768, 'dx': 1152, 'dy': 640}, {'sx': 1280, 'sy': 1792, 'dx': 1231, 'dy': 640}, {'sx': 896, 'sy': 1536, 'dx': 0, 'dy': 768}, {'sx': 1152, 'sy': 1280, 'dx': 128, 'dy': 768}, {'sx': 896, 'sy': 128, 'dx': 256, 'dy': 768}, {'sx': 640, 'sy': 1664, 'dx': 384, 'dy': 768}, {'sx': 512, 'sy': 1024, 'dx': 512, 'dy': 768}, {'sx': 1152, 'sy': 896, 'dx': 640, 'dy': 768}, {'sx': 256, 'sy': 384, 'dx': 768, 'dy': 768}, {'sx': 1024, 'sy': 128, 'dx': 896, 'dy': 768}, {'sx': 768, 'sy': 1536, 'dx': 1024, 'dy': 768}, {'sx': 384, 'sy': 1024, 'dx': 1152, 'dy': 768}, {'sx': 1152, 'sy': 1792, 'dx': 1231, 'dy': 768}, {'sx': 1024, 'sy': 1664, 'dx': 0, 'dy': 896}, {'sx': 0, 'sy': 0, 'dx': 128, 'dy': 896}, {'sx': 0, 'sy': 1024, 'dx': 256, 'dy': 896}, {'sx': 1280, 'sy': 1024, 'dx': 384, 'dy': 896}, {'sx': 512, 'sy': 640, 'dx': 512, 'dy': 896}, {'sx': 1280, 'sy': 512, 'dx': 640, 'dy': 896}, {'sx': 256, 'sy': 896, 'dx': 768, 'dy': 896}, {'sx': 768, 'sy': 512, 'dx': 896, 'dy': 896}, {'sx': 1152, 'sy': 768, 'dx': 1024, 'dy': 896}, {'sx': 896, 'sy': 896, 'dx': 1152, 'dy': 896}, {'sx': 1280, 'sy': 0, 'dx': 1231, 'dy': 896}, {'sx': 256, 'sy': 0, 'dx': 0, 'dy': 1024}, {'sx': 128, 'sy': 256, 'dx': 128, 'dy': 1024}, {'sx': 128, 'sy': 512, 'dx': 256, 'dy': 1024}, {'sx': 384, 'sy': 0, 'dx': 384, 'dy': 1024}, {'sx': 384, 'sy': 1792, 'dx': 512, 'dy': 1024}, {'sx': 1024, 'sy': 1792, 'dx': 640, 'dy': 1024}, {'sx': 0, 'sy': 1280, 'dx': 768, 'dy': 1024}, {'sx': 256, 'sy': 1024, 'dx': 896, 'dy': 1024}, {'sx': 768, 'sy': 640, 'dx': 1024, 'dy': 1024}, {'sx': 1152, 'sy': 384, 'dx': 1152, 'dy': 1024}, {'sx': 1024, 'sy': 1152, 'dx': 1231, 'dy': 1024}, {'sx': 1280, 'sy': 128, 'dx': 0, 'dy': 1152}, {'sx': 640, 'sy': 1408, 'dx': 128, 'dy': 1152}, {'sx': 0, 'sy': 384, 'dx': 256, 'dy': 1152}, {'sx': 512, 'sy': 0, 'dx': 384, 'dy': 1152}, {'sx': 512, 'sy': 384, 'dx': 512, 'dy': 1152}, {'sx': 512, 'sy': 256, 'dx': 640, 'dy': 1152}, {'sx': 1024, 'sy': 1536, 'dx': 768, 'dy': 1152}, {'sx': 640, 'sy': 768, 'dx': 896, 'dy': 1152}, {'sx': 384, 'sy': 896, 'dx': 1024, 'dy': 1152}, {'sx': 384, 'sy': 1408, 'dx': 1152, 'dy': 1152}, {'sx': 1024, 'sy': 768, 'dx': 1231, 'dy': 1152}, {'sx': 256, 'sy': 256, 'dx': 0, 'dy': 1280}, {'sx': 256, 'sy': 1536, 'dx': 128, 'dy': 1280}, {'sx': 640, 'sy': 256, 'dx': 256, 'dy': 1280}, {'sx': 640, 'sy': 384, 'dx': 384, 'dy': 1280}, {'sx': 640, 'sy': 896, 'dx': 512, 'dy': 1280}, {'sx': 512, 'sy': 1152, 'dx': 640, 'dy': 1280}, {'sx': 896, 'sy': 640, 'dx': 768, 'dy': 1280}, {'sx': 896, 'sy': 512, 'dx': 896, 'dy': 1280}, {'sx': 1152, 'sy': 128, 'dx': 1024, 'dy': 1280}, {'sx': 1280, 'sy': 256, 'dx': 1152, 'dy': 1280}, {'sx': 768, 'sy': 256, 'dx': 1231, 'dy': 1280}, {'sx': 640, 'sy': 1152, 'dx': 0, 'dy': 1408}, {'sx': 384, 'sy': 256, 'dx': 128, 'dy': 1408}, {'sx': 512, 'sy': 512, 'dx': 256, 'dy': 1408}, {'sx': 1024, 'sy': 1024, 'dx': 384, 'dy': 1408}, {'sx': 384, 'sy': 768, 'dx': 512, 'dy': 1408}, {'sx': 1280, 'sy': 1408, 'dx': 640, 'dy': 1408}, {'sx': 0, 'sy': 640, 'dx': 768, 'dy': 1408}, {'sx': 1024, 'sy': 1408, 'dx': 896, 'dy': 1408}, {'sx': 1024, 'sy': 1280, 'dx': 1024, 'dy': 1408}, {'sx': 896, 'sy': 1664, 'dx': 1152, 'dy': 1408}, {'sx': 1280, 'sy': 1152, 'dx': 1231, 'dy': 1408}, {'sx': 0, 'sy': 1792, 'dx': 0, 'dy': 1536}, {'sx': 768, 'sy': 1792, 'dx': 128, 'dy': 1536}, {'sx': 896, 'sy': 1280, 'dx': 256, 'dy': 1536}, {'sx': 0, 'sy': 1536, 'dx': 384, 'dy': 1536}, {'sx': 0, 'sy': 1664, 'dx': 512, 'dy': 1536}, {'sx': 768, 'sy': 1408, 'dx': 640, 'dy': 1536}, {'sx': 512, 'sy': 896, 'dx': 768, 'dy': 1536}, {'sx': 128, 'sy': 768, 'dx': 896, 'dy': 1536}, {'sx': 768, 'sy': 1664, 'dx': 1024, 'dy': 1536}, {'sx': 128, 'sy': 1152, 'dx': 1152, 'dy': 1536}, {'sx': 1280, 'sy': 1664, 'dx': 1231, 'dy': 1536}, {'sx': 1152, 'sy': 512, 'dx': 0, 'dy': 1664}, {'sx': 128, 'sy': 896, 'dx': 128, 'dy': 1664}, {'sx': 512, 'sy': 1408, 'dx': 256, 'dy': 1664}, {'sx': 1280, 'sy': 1536, 'dx': 384, 'dy': 1664}, {'sx': 256, 'sy': 1152, 'dx': 512, 'dy': 1664}, {'sx': 384, 'sy': 640, 'dx': 640, 'dy': 1664}, {'sx': 0, 'sy': 768, 'dx': 768, 'dy': 1664}, {'sx': 640, 'sy': 128, 'dx': 896, 'dy': 1664}, {'sx': 1280, 'sy': 1280, 'dx': 1024, 'dy': 1664}, {'sx': 256, 'sy': 1280, 'dx': 1152, 'dy': 1664}, {'sx': 384, 'sy': 1152, 'dx': 1231, 'dy': 1664}, {'sx': 896, 'sy': 1408, 'dx': 0, 'dy': 1792}, {'sx': 1024, 'sy': 896, 'dx': 128, 'dy': 1792}, {'sx': 256, 'sy': 640, 'dx': 256, 'dy': 1792}, {'sx': 768, 'sy': 384, 'dx': 384, 'dy': 1792}, {'sx': 512, 'sy': 1664, 'dx': 512, 'dy': 1792}, {'sx': 896, 'sy': 1152, 'dx': 640, 'dy': 1792}, {'sx': 128, 'sy': 128, 'dx': 768, 'dy': 1792}, {'sx': 256, 'sy': 512, 'dx': 896, 'dy': 1792}, {'sx': 384, 'sy': 1536, 'dx': 1024, 'dy': 1792}, {'sx': 512, 'sy': 128, 'dx': 1152, 'dy': 1792}, {'sx': 1152, 'sy': 1152, 'dx': 1231, 'dy': 1792}]

print(f"[+] total ops count: {str(len(ops))}")

print("[+] opsから切り取り貼り付けをしています...")

# 入力画像の読み込み
input_image = Image.open("1f53cfcccd0ac3b3fab76590c77be16c2e60be54.jpg")  # 必要に応じてパスを変更

# 出力画像のサイズを計算
output_width = max(op['dx'] for op in ops) + 128  # 各タイルの幅を考慮 (仮定: タイルは128x128)
output_height = max(op['dy'] for op in ops) + 128

# 空の出力画像を作成
output_image = Image.new("RGBA", (output_width, output_height), (0, 0, 0, 0))

# ops に基づいてタイルを配置
for op in ops:
    # 元画像から部分を切り取る
    tile = input_image.crop((op['sx'], op['sy'], op['sx'] + 128, op['sy'] + 128))  # タイルサイズ 128x128 仮定
    # 出力画像に貼り付け
    output_image.paste(tile, (op['dx'], op['dy']))

# 出力画像を保存または表示
output_image.save("output.png")
print("[+] 切り取り、貼り付けが完了しました。表示します...")
output_image.show()
